syntax="proto2";

enum Status {
  Alive=0;
  Suspect=1;
  Dead=2;
}


message Peer {
  required string host = 1;
  required int32 port = 2; 
}

message PeerView {
  required Peer local = 1;
  repeated Peer neighbors = 2; 
}

message Rumor {
  required string id = 1;
  required int32 round = 2;
  required Peer from = 3; 
  required bytes payload = 4;
}

message Exchange {
  required string id = 1;
  required Peer from = 2;
  required bytes payload = 3;
} 


message Reply {
  required bool success = 1;
  required bytes payload = 2; 
}


message Ping {
  required Peer from = 1; 
}

message MembershipChange {
  required Status status = 1;
  required Peer peer = 2;
}  

